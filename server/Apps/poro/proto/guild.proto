syntax = "proto2";

import "common.proto";
package protobuf.guild;

option java_package = "xag.idgo.core.proto";
option java_outer_classname = "GuildProto";
//公会

	
  
 //进入公会地图的时候，下发的。
  message GuildEnterInfo {
	optional GuildBaseInfo info=1; //公会的基本信息。
  	repeated MillOtherInfo otherslist = 2; //其他玩家矿脉的信息。
	required int32 robberyothercnt = 3; //进入掠夺其他玩家的次数。
	required int64 lastrefreshtime = 4; //下次刷新其他玩家信息的时间。
	optional int32 refreshattackcnt = 5; //本次刷新环节内打boss的次数。
	optional int64 refreshfreecnttime = 6; //下次环节刷新免费打boss次数的时间。
	optional int32 bossid = 7; //boss的配置id。
	optional int32 blood = 8; //血量，百分比，等于0就是死了。
	optional int32 identity = 9;//自己的公会身份
	optional int32 milllvl = 10; //矿脉等级
	optional int32 millexp = 11; //当前经验
	optional bool isSet = 12;//是否设置了工会战阵容
	optional bool isJoin = 13;//工会是否报名了
	optional int32 state = 14;//当前工会战阶段状态（ 1;//排位赛阶段 2;//决赛阶段 3;//决赛结算阶段 4;//休息阶段）
	optional int32 battleTime = 15;//当前工会战战斗次数
	optional int32 battleBox = 16;//工会战宝箱（0--没有 类型，1--排位赛并且设置了队伍，2--排位赛并且没设置队伍，3--决赛并且设置了队伍，4--决赛并且没设置队伍）
	optional protobuf.common.LineupTemplate lineup = 17;//工会战历史阵容
	optional bool isEntryFinal = 18;//是否进入决赛
  }
  
   //公会玩家基本信息。
  message GuildPlayer {
	required string playerid = 1; //玩家id
	required string playericon = 2; //头像
	required string playername =3; //名字
	optional int32 power=4; //战力
	optional int32 identity=5; //玩家身份。0普通会有，1副会长，10会长。
	optional int64 entertime=6; //加入公会时间
	optional int64 lastlogintime=7; //最后登陆时间,如果是999，表示正在线上。
	optional int32 playerlvl = 8;//玩家等级。
	optional int32 headFrame = 9;// 头像框
	optional int32 exp = 10;//工会经验
	optional int32 serverId = 11;//服务器id
	optional int32 sex = 12;//性别
  }
  
  	//工会日志
	message GuildRecordInfo {
		repeated GuildRecord recordInfo = 1;
	}
	
	message GuildRecord {
		required int64 time = 1; //记录时间
		optional RecordType recordType = 2; //记录类型
		optional string runName = 3; //执行者名字
		optional string byName = 4; //被执行者名称
	}
	
	//公会成员对公会boss造成的伤害
	message GuildBossDamage{
		optional int32 bossId = 1;
		repeated PlayerDamage bossDamage=2;
	}
	
	message PlayerDamage{
		optional string name=1;
		optional string icon=2;
		optional string playerId=3;
		optional int32 lv=4;//玩家等级
		optional int32 attackCnt=5;//当前攻击次数
		optional int64 totalDamage=6;//总伤害
	}
	
	//工会日志具体类型
	enum RecordType 
    {
        CREAT = 0; //创建工会
        MODIFY_ICON = 1; //修改工会信息
        MODIFY_NAME = 2; //修改工会信息名称
		MAIL = 3;//工会邮件
		JOIN = 4;//进入工会
		SIGN = 5;//签到
		EXIT = 6;//退出工会
		LIFTING = 7;//解除管理员
		APPOINT = 8;//任命管理员
		TRANSFER = 9;//转让工会
		KICK_OUT = 10;//被踢出工会
    }
	
	//工会申请列表
	message GuildApplyInfo {
		repeated GuildPlayer playerInfo = 1;
	}
  
  //公会的基本信息。
  message GuildBaseInfo {
  	optional int32 guildid=1; //公会id
	optional string guildname=2; //名称
	optional string guildicon=3; //图标
	optional string notice=4; //公告
	optional int32 limitGrade=5; ///玩家限制等级
	optional bool needapproval=6; //是否需要审批
	optional int32 lvl = 7;//公会等级
	optional int32 exp = 8;//公会经验
	optional int32 playercnt = 9; //公会当前人数。
	optional int32 rank = 10;//公会的当前排名。
	optional int32 finalRank = 11;//工会战上次决赛排名。
	optional int32 index = 12;//位置索引
	optional string serverName = 13;//服务器
	optional string id=14; //公会的唯一id
	optional int32 yesterdayExp = 15;//昨日活跃（工会经验）
	optional string language = 16;//语言
	optional string joinNotice = 17;//入会说明
	optional int32 residueExp = 18;//公会当前剩余活跃度
  }
  
  //公会的成员信息,T人-转让-任命-解聘，下发
  message GuildPlayers {
	optional GuildBaseInfo baseinfo = 1; //公会的基本信息。
	repeated GuildPlayer players=5; //公会成员
  }

  //公会列表下发，只展示公会的基本信息。
  message GuildListInfo {
	optional int32 myrank = 2; //我家公会排行
	repeated GuildBaseInfo infos=1; //公会的信息列表。
  }
  //签到或打boss的时候，获取的经验收益。
  message GuildDyInfo {
	required int32 curexp=1; //当前经验
	required int32 curlvl=2; //当前等级
	repeated protobuf.common.KVint3232 items=3; //获取的奖励。
  }
  //boss的伤害。
  message BossDamage {
	required string playerid=1; //玩家id
	optional int32 attackcnt= 2; //打击次数，公会的才有
	required int64 totaldamage = 3; //总伤害
	optional bool received = 4; //是否领取，公会的才有
	required string playername = 5; //玩家名字
	required string playerhead = 6; //玩家图标
	required int32 power = 7; //玩家战力
	required int32 playerlvl = 8;//玩家等级。
	optional int32 identity = 9;//玩家身份,公会的才有
	optional int32 headFrame = 10;// 头像框
  }
  //boss相关信息。
  message GuildBossInfo {
	optional int32 refreshattackcnt = 1; //boos可被攻击剩余次数
	optional int64 refreshfreecnttime = 2; //下次环节刷新免费打boss次数的时间。
	optional int32 bossid = 3; //boss的配置id。
	optional int32 blood = 4; //血量，百分比，等于0就是死了。
	optional bool isOpen = 5;//boss是否开启
	repeated BossDamage playerdamages= 6; //玩家伤害list
	optional int32 freeExp=7;//当前剩余活跃度
	optional int32 exp = 8;//总公会经验
  }
  //被抢劫信息
  message MillRobbery {
	required string playerid = 1; //抢劫的玩家
	required int64 time=2;//抢劫的时间
	required int32 guildid = 3; //玩家的公会id
	required string guildname = 4; //公会名称
	required string playername =5; //玩家名字
	required int32 playerlvl = 6; //玩家的等级
	required string playerhead =7; //玩家头像
	required int32 millid = 8; //矿脉id
	required int32 milllvl = 9; //矿脉等级
	required int32 state = 10; //1，防守成功，2，被抢劫，3复仇成功
	required int64 robberyId = 11; //此次抢劫的id
	optional int32 headFrame = 12;// 头像框

  }
 //自己矿脉信息
  message MillMyInfo {
	required int32 millid=1;//矿脉id
	required int32 milllvl=5;//矿脉等级
	optional int64 millFinishTime = 2;//矿脉收益的时间
	repeated protobuf.common.KVint3232 received = 3;//收益收取
	repeated MillRobbery robberylist = 4; //被抢的记录
  }
  //他人公会，矿脉信息
  message MillOtherInfo {
	optional string playerid=1;
	optional string playername = 2;
	required GuildBaseInfo guildinfo = 3;
	optional int32 power =4; //战力展示
	optional int32 millid  =5; //矿脉id
	optional int32 milllvl = 6; //矿脉等级
	optional bool robberyed = 7; //是否抢劫成功。
  }
  
  //矿脉的等级信息。
  message MillLvlInfo {
  	required int32 milllvl = 1; //当前等级。
	required int32 millexp = 2; //当前经验。
	required int64 guildgold = 4; //当前公会币
	repeated MillExpHistory history = 3; //捐赠记录
  }
  
  message DonationHistory {
	repeated MillExpHistory history = 1; //总捐赠记录
  }
  
  //矿脉等级升级的捐赠金币记录。
  message MillExpHistory {
	required string playerid = 1;
	required string playername = 2;
	required int64 gold = 3; //捐赠的金币
	required int64 time = 4; //时间
	required int32 playerlvl = 5; //等级
	required int32 identity = 6; //玩家身份
	required string head = 7; //头像
	optional int32 headFrame = 8;// 头像框
  }
    //修改公会信息
  message ModGuildInfo{
	required int32 type=1; //类型（0修改名称，1修改其他）
	required GuildBaseInfo info=2;
  }
  
  message DynIcon {
	required string icon = 1;//徽章id
	required int64 outtime = 2; //过期时间
	required int64 usetime = 3; //上次使用时间
  }
  
  message DynIconList {
	repeated DynIcon icons = 1;//列表
  }
  //进入集结大厅
  message EnterHall {
   required int32 state = 1;//当前状态
   required int64 time = 2;//倒计时
   required bool isJoin = 3;//是否报名
   optional int32 rank = 4;//排名
   optional int32 score = 5;//分数
   optional int32 energy = 6;//能量
   optional int64 energyTime = 7;//能量倒计时
   repeated LineupShow lineup = 8;//阵容列表
   repeated RankInfo contribution = 9;//贡献列表
   optional bool isSetOther = 10;//是否在其他公会参战
  }
  message LineupShow{
   required string id = 1;//玩家id
   required string name = 2;//玩家名字
   required bool isJoin = 3;//是否上阵
   required bool isHide = 4;//是否隐藏
   required int32 power = 5;//战力
   repeated protobuf.common.KVint3232 heros = 6;//英雄和宠物（key--id,value--等级，key==0表示没有） 
  }
  message EnemyInfoRequest{
	required string id = 1;//敌方工会id或者位置索引
	required bool refresh = 2;//是否刷新
  }
  message EnemyInfoReply{
     optional EnemyInfo info = 1;//敌方工会信息
     optional int32 energy = 6;//能量
     optional int64 energyTime = 7;//能量倒计时
  }
  message EnemyInfo{
	required int32 rank = 1;//排名
    required int32 score = 2;//分数
    required string guildname=3;//名称
	required string guildicon=4; //图标
	required string serverName = 5;//敌方服务器
	repeated EnemyLineupShow lineup = 6;//阵容列表
	optional int32 finalRank = 7;//工会战上次决赛排名
	
  }
    message EnemyLineupShow{
   required string name = 1;//玩家名字
   required bool isHide = 2;//是否隐藏
   repeated protobuf.common.KVint3232 heros = 3;//英雄和宠物（key--id,value--等级，key==0表示没有） 
  }


   message RankInfo {
    required string id = 1; //玩家id
	required int32 level = 2;//
	required string name = 3;//
	required string head = 4;// 头像
	required int32 headFrame = 5;// 头像框
	required int32 winTime = 6;//胜利场次
 }
  message RecordReply {
   repeated Record records = 1;
  }
  
    message Record {
    required string id = 1; //对应记录详情的id
	required string serverName = 2;//敌方服务器
	required string name = 3;//敌方工会名
	required string icon = 4;// 敌方工会徽章
	required int32 score = 5;// 分数
	required int64 time = 6;//时间
	required bool isWin = 7;//本方是否胜利
 }
	//聊天工会战展示
  message ChatRecord {
    required string id = 1; //对应记录详情的id
	required string atServerName = 2;//攻击方服务器
	required string atName = 3;//攻击方工会名
	required string atIcon = 4;// 攻击方工会徽章
	required string deServerName = 5;//防守方服务器
	required string deName = 6;//防守方工会名
	required string deIcon = 7;// 防守方工会徽章
	required int32 score = 8;// 分数
	required int64 time = 9;//时间
	required bool isWin = 10;//本方是否胜利
	required int32 winTime = 11;//本方胜利场次
	required int32 failTime = 12;//本方失败场次
 }
 //保证工会战阵容
 message SetLineup {
   repeated string ids = 1;//上阵队伍玩家id,按顺序
   repeated string hides = 2;//隐藏上阵队伍玩家id
  }
     message RecordDetailReply{
		repeated RecordDetail records = 1;
   }
  //记录详情
  message RecordDetail{
    required string id = 1; //对应战斗录像的id
	required int32 atLv = 2;//攻击方等级
	required string atName = 3;//攻击方名字
	required string atHead = 4;// 攻击方头像
	required int32 atHeadFrame = 5;// 攻击方头像框
	required int32 deLv = 6;//防守方等级
	required string deName = 7;//防守方名字
	required string deHead = 8;// 防守方头像
	required int32 deHeadFrame = 9;// 防守方头像框
	required bool atIsWin = 10;//攻击方头是否胜利
	repeated HeroShow atHeros = 11;//攻击方阵容展示信息
	repeated HeroShow deHeros = 12;//防守方阵容展示信息
 }
 message HeroShow{
	required int32 index = 1;//站位，1-6，宠物 0
	required int32 id = 2;//配置id
	required int32 lv = 3;//等级
	required bool isDie = 4;//是否死亡
 }
	//决赛记录
     message FinalRecord {
	required string atServerName = 1;//攻击方服务器
	required string atName = 2;//攻击方工会名
	required string atIcon = 3;// 攻击方工会徽章
	required string deServerName = 4;//防守方服务器
	required string deName = 5;//防守方工会名
	required string deIcon = 6;// 防守方工会徽章
	required bool isWin = 7;//攻击方是否胜利
	repeated RecordDetail records = 8;
 }
 	//决赛工会展示
     message FinalGuildShow {
	required string id = 1;//工会id
	required string name = 2;//工会名
	required string icon = 3;// 工会徽章
	required string serverName = 4;//服务器
	required int32 rank = 5;//工会战排位赛排名
	optional int32 lastRank = 6;//工会战上次决赛排名
	optional int32 finalRank = 7;//工会战本次决赛排名
 }
  //进入决赛界面
  message EnterFinal {
   required int32 state = 1;//当前状态
   optional int64 time = 2;//倒计时
   optional bool isRank = 3;//是否有上次排名
   optional Bet bet = 4;//投注的信息
   repeated FinalGuildShow lineup = 5;//阵容列表
}
 message Bet {
   required string id = 1;//工会id
   required int32 num = 2;//注数
   required int32 rank = 3;//配置表编号
}
 message Box {
   repeated protobuf.common.KVint3264 items = 1;//物品
   required int32 type = 2;//类型，1--排位赛并且设置了队伍，2--排位赛并且没设置队伍，3--决赛并且设置了队伍，4--决赛并且没设置队伍）
   required int32 rank = 3;//排名
   required int32 nextType = 4;//下一个宝箱的类型
}
